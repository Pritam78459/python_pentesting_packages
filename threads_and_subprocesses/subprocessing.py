#! /usr/bin/python3.8.6

import subprocess
import datetime as dt
import sys
import chardet

class SP():
    def execute(self,command,args=""):
        try:
            p=subprocess.Popen(command+" "+str(args),shell=True,
                    stderr=subprocess.PIPE,
                    stdout=subprocess.PIPE)
            print("ID of spawned process is : "+str(p.pid)+"\n")
            out,err=p.communicate()
            result=chardet.detect(out)
            out=str(out).encode("ascii")
            out=out.decode("utf-8")
            splitted=str(out).split("\\n")
            for o in splitted:
                print(o)

        except Exception as ex:
            print("Exception caught : "+str(ex))

obj=SP()
obj.execute("ls")
